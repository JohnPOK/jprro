<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Cisco Training</title>
		<link href="" media="all" rel="Stylesheet" type="text/css" />
		<link href="/home/include/img/favicon.ico" rel="icon" type="image/x-icon" />

		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="/home/include/css/bootstrap/bootstrap.min.css">

		<!-- jQuery Script -->
		<script src="../../home/include/js/jquery/jquery.min.js"></script>

		<!-- Popper, Bootstrap, Custom JS -->
		<script src="../../home/include/js/popper/popper.min.js"></script>
		<script src="../../home/include/js/bootstrap/bootstrap.min.js"></script>
		<script src="../../home/include/js/custom.js"></script>
	</head>
	<body>
		<!-- Header -->
		<div class="jumbotron jumbotron-fluid text-center" style="margin-bottom:0">
			<h1>Configure NTP</h1>
		</div>

		<!-- Content -->
		<div class="container" style="margin-top:30px">
			<div class="row">
				<div class="col-sm-12">
					<div class="alert alert-warning">
						<h2 class="text-warning">Topic D</h2>
					</div>
					<h3 class="text-success">Configure NTP</h3>
					<p>Some network services and applications require that all hosts have accurate time configurations. For instance, time synchronization is vital to a network because the <text class="font-italic">time stamps on log messages</text> generated by different devices help to troubleshoot problems. One way to ensure time synchronization is to configure the <text class="font-italic">Network Time Protocol (NTP)</text>.</p>
					<h4>NTP</h4>
					<p>The <text class="font-weight-bold font-italic text-primary">Network Time Protocol (NTP)</text> is an Internet protocol that synchronizes the clock times of devices in a network by exchanging time signals. NTP works at the Application layer of the TCP/IP and OSI models.</p>
					<p>NTP uses UDP port <text class="font-weight-bold">123</text>.</p>
					<p>NTP sends periodic time requests to servers to obtain the server time stamp and adjusts the client's clock based on the server time stamp. NTP servers synchronize the time in all the clients to milliseconds.</p>
					<p>Cisco devices can be configured to authenticate NTP time synchronization. The NTP authentication mechanism configured at a device uses authentication keys to verify a time source. The authentication keys that a NTP server must provide are defined by entering the <text class="font-weight-bold text-success">ntp authentication-key</text> command at the NTP server.</p>
					<p>On the client side, the <text class="font-weight-bold text-success">ntp trusted-key</text> command validates the authentication keys in the packets received from the NTP server. The client permits time synchronization only after ensuring that the authentication keys are valid. If the authentication fails, the client does <u>not</u> allow time synchronization at the local clock and discards the NTP packets.</p>
					<p>Here is the command to define NTP authentication keys:<br>
						<text class="font-weight-bold text-success">ntp authentication-key &lt;number&gt; md5 &lt;value&gt;</text>
					</p>
					<p>This is the command to authenticate a time source at the client:<br>
						<text class="font-weight-bold text-success">ntp trusted-key &lt;key-number&gt;</text>
					</p>
					<h4>Server Mode</h4>
					<p>NTP servers are devices that receive time from a reliable time source and use that time to synchronize NTP clients. A metric called <text class="font-italic">stratum</text> is used to indicate the number of servers or hops that lie between an NTP server and a time source.</p>
					<ul>
						<li class="alert alert-info" role="alert"><text class="font-weight-bold font-italic text-primary">Stratum 0</text> devices are references for the rest of the world. They are typically <text class="font-italic">cesium atomic clocks</text> or <text class="font-italic">Global Positioning Systems</text> that have atomic clocks built into them. They distribute coordinated universal time to <text class="font-weight-bold">Stratum 1</text> devices. Examples include Global Navigation Satellite Systems (GNSS) and national radio time and frequency broadcasts.</li>
						<li class="alert alert-info" role="alert"><text class="font-weight-bold font-italic text-primary">Stratum 1</text> are NTP servers that are connected to <text class="font-weight-bold">Stratum 0</text> devices. These are maintained by government agencies, universities, and private business. There are more than <text class="font-weight-bold">200 Stratum 1</text> servers, most of which are available for the general public to connect to.</li>
						<li class="alert alert-info" role="alert">Cisco implements <text class="font-weight-bold font-italic text-primary">Stratum 2</text> to <text class="font-weight-bold font-italic text-primary">Stratum 15</text> NTP servers that are synchronised with public NTP servers in the Internet.</li>
					</ul>
					<p>An NTP server always checks the time reported by its time source. If the time varies significantly from the NTP server's time, synchronization is <u>not</u> performed. You can establish NTP peer relationships designating certain hosts as time servers on a network. Such relationships enable network devices to maintain accurate time even if the NTP server is down. You use the <text class="font-weight-bold text-success">ntp-master</text> command to set a Cisco router or switch to act as an NTP server.</p>
					<ul class="list-group">
						<li class="list-group-item d-flex align-items-left"><text class="alert alert-info" role="alert"><text class="font-weight-bold">Note:</text> For a list of Stratum 1 NTP servers, see https://support.ntp.org/bin/view/Servers/StratumOneTimeServers.</text></li>
					</ul>
					<h4>Client Mode</h4>
					<p>A Cisco device can also act as an NTP client. NTP clients are devices in a network that receive time updates from an NTP server.</p>
					<p>The <text class="font-weight-bold text-success">ntp server &lt;ip-address&gt;</text> command must be entered at a device to allow the local clock to be synchronized with an NTP server. When this commend runs, the IP address of the NTP server is available at the device, and the device is identified as an NTP client.</p>
					<p>The <text class="font-weight-bold text-success">show ntp status</text> command displays the current status of NTP time synchronization.</p>
					<p>Devices on a network can act like peers and provide time synchronization to other devices. The IP addresses for peer associations are statically configured on the peer devices to enable communication and maintain accurate time. The <text class="font-weight-bold text-success">show ntp associations</text> command displays the other devices to which a particular device is associated as a peer.</p>
					<h4>Command Reference: Configuring NTP</h4>
					<p>This section contains the commands you will use in the next set of labs.</p>
					<h5>Configuring NTP</h5>
					<p>The following commands are used in the Configuring NTP labs:</p>
					<ul>
						<li><text class="font-weight-bold text-success">clock rate &lt;clock-rate&gt;</text>: Sets the clock rate for a DCE interface.</li>
						<li><text class="font-weight-bold text-success">clock set &lt;hh:mm:ss&gt; &lt;day&gt; &lt;month&gt; &lt;year&gt;</text>: Sets the system software clock.</li>
						<li><text class="font-weight-bold text-success">configure terminal</text>: Enters global configuration mode from privileged EXEC mode.</li>
						<li><text class="font-weight-bold text-success">enable</text>: Enters privileged EXEC mode.</li>
						<li><text class="font-weight-bold text-success">end</text>: Ends and exits configuration mode.</li>
						<li><text class="font-weight-bold text-success">exit</text>: Exits one level in the menu structure.</li>
						<li><text class="font-weight-bold text-success">hostname &lt;host-name&gt;</text>: Sets the device name.</li>
						<li><text class="font-weight-bold text-success">interface &lt;type&gt; &lt;number&gt;</text>: Changes from global configuration mode to interface configuration mode.</li>
						<li><text class="font-weight-bold text-success">ip address &lt;ip-address&gt; &lt;subnet-mask&gt;</text>: Assigns an IP address to an interface.</li>
						<li><text class="font-weight-bold text-success">[no] shutdown</text>: Disables an interface. The <text class="font-weight-bold text-success">no</text> form enables an interface.</li>
						<li><text class="font-weight-bold text-success">ntp master &lt;stratum&gt;</text>: Configures the Cisco IOS software as an NTP master clock to which peers synchronize themselves.</li>
						<li><text class="font-weight-bold text-success">ntp server &lt;ip-address&gt; key &lt;key-id&gt;</text>: Allows the Cisco IOS software clock to be synchronized by an NTP time server.</li>
						<li><text class="font-weight-bold text-success">ping &lt;ip-address&gt;</text>: Sends an Internet Control Message Protocol (ICMP) echo request to the specified address.</li>
						<li><text class="font-weight-bold text-success">show clock detail</text>: Displays the time and date from the system software clock.</li>
						<li><text class="font-weight-bold text-success">show ip interface brief</text>: Displays a brief summary of interface status and configuration.</li>
						<li><text class="font-weight-bold text-success">show ntp associations detail</text>: Shows the status of NTP associations.</li>
						<li><text class="font-weight-bold text-success">show ntp status</text>: Shows the status of NTP.</li>
						<li><text class="font-weight-bold text-success">show running-config</text>: Displays the active configuration file.</li>
					</ul>
					<h5>Lab: Configuring NTP I</h5>
					<p>Here is the information you need to complete this lab:</p>
					<ul>
						<li>Path to lab: <text class="font-weight-bold">CIS-NS-200301-01->IP Services->Configuring NTP I</text></li>
						<li>Approximate duration: 15 minutes</li>
					</ul>
					<h5>Lab: Configuring NTP II</h5>
					<p>Here is the information you need to complete this lab:</p>
					<ul>
						<li>Path to lab: <text class="font-weight-bold">CIS-NS-200301-01->IP Services->Configuring NTP II</text></li>
						<li>Approximate duration: 20 minutes</li>
					</ul>
				</div>
			</div>
		</div>
		<!-- Footer -->
		<footer>
			<div class="container">
				<p class="text-center">Copyright (c) 2020, JPRRO</p>
			</div>
		</footer>
	</body>
</html>
